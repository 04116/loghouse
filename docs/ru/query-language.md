# Язык запросов

Запрос (`QUERY`) имеет вид `EXPRESSION [QUERY_OPERATOR QUERY]`.

Возможные значения `QUERY_OPERATOR`:
1. `AND`,
2. `OR`.

Выражение (`EXPRESSION`) имеет вид `KEY EXPRESSION_OPERATOR VALUE`.

Ключом (`KEY`) может быть:
1. Любая строка, начинающаяся с буквы (`[a-zA-Z]`) и содержащая `[a-zA-Z0-9_\-\.]`.
2. Предопределённое значение `*`, обозначающее любой ключ.

Для удобства поиска по меткам (labels) можно начать ключ с `~`, после которого указать имя метки (`~component` эквивалентно `label.component`).

Есть несколько видов `EXPRESSION_OPERATOR`:
1. Равенство: `=`, `!=`. Применяется для строковых (`string_fields`) и численных (`number_fields`) значений. При этом если `VALUE` взято в кавычки, то поиск будет только среди строковых значений. Если `VALUE` имеет символы `%` или `_` — сравнение происходит с помощью `LIKE`.
2. Сравнение: `>`, `<`, `>=`, `<=`. Применяется только для численных значений.
3. Регулярное выражение: `=~`. Применяется только для строковых значений, поиск происходит с помощью `MATCH`.
4. Поиск булевых значений: `is true`, `is false`. Применяется только для булевых (`boolean_fields`) значений.
5. Поиск NULL-значений: `is null`, `is not null`. Проверяется наличие ключа среди NULL-полей (`null_fields`).

P.S. Все встроенные операторы (`is true`, `is null` и т.д.) являются регистронезависимыми. Операторы могут быть окружены пробелами.

## Примеры
1.  `host=kube-1 and log.level > 10`
1.  `* =~ kube-[1-9]`
1.  `~component = clickhouse`
1.  `log = %error% or log != %success%`
1.  `unhealthy is true`
1.  `status is null`
