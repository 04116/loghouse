# Namespace in Kubernetes for setup loghouse
namespace: loghouse

# Basic-auth string. Generated by command:
# echo "PASSWORD" | htpasswd -ni USERNAME | base64 -w0
# Example:
# command: echo "PASSWORD" | htpasswd -ni admin | base64 -w0
# result: YWRtaW46JGFwcjEkMzdxSEwvTVIkcEFvdzEzZDUwMkd5VFc2VDNlQmJiMAoK
auth: YWRtaW46JGFwcjEkMzdxSEwvTVIkcEFvdzEzZDUwMkd5VFc2VDNlQmJiMAoK

# Password for default user in clickhouse
clickhouse_pass_original: password
# coded password for clickhouse config for default user. Generated by command:
# echo "PASSWORD" | sha256sum | tr -d '-' | tr -d ' '
# Example:
# command: echo "password" | sha256sum | tr -d '-' | tr -d ' '
# result: 6b3a55e0261b0304143f805a24924d0c1c44524821305f31d9277843b8a10f4e
clickhouse_pass_sha256: 6b3a55e0261b0304143f805a24924d0c1c44524821305f31d9277843b8a10f4e

# Settings for ingress
ingress:
  enable: true
  enable_https: true
  clickhouse_host: clickhouse.domain.com
  loghouse_host: loghouse.domain.com
  tabix_host: tabix.domain.com

# Enable tabix
enable_tabix: false

# Docker custom path. If docker installed on seperate disk. Add to mount this path
# docker_path: /data/docker

storage:
  # You can use some storageClass or hostpath for clickhouse data storage
  hostpath: /data
  pvc:
    name: clickhouse
    accessMode: ReadWriteOnce
    size: 20Gi
    storageClassName: rbd

# Custom partitioning, using LOGS_TABLES_PARTITION_PERIOD variable, in hours.
# 24 must be divisible by this value for now, so tables always can start with 00 hours (it's skipped for 24). Default is 24, as it was.
partition_period: 1


# If you want use nodeSelector for install clickhouse, loghouse on specific node
# nodeSelector:
#   enable: true
#   key: 'node-role/logging'
#   value: ''
nodeSelector:
  enable: true
  key: 'node-role/logging'
  value: ''

# If you want use taint for install only clickhouse, loghouse on specific node
# tolerations:
#   enable: true
#   key: 'node-role/logging'
#   operator: 'Exists'
#   value: 'logging'
#   effect: 'NoSchedule'
tolerations:
  enable: true
  key: 'node-role/logging'
  operator: 'Exists'

image:
  imagePullPolicy: Always
  clickhouse: flant/loghouse-clickhouse:latest
  fluentd: flant/loghouse-fluentd:latest
  loghouse: flant/loghouse-dashboard:latest
  tabix: flant/loghouse-tabix:latest
clickhouse:
  server: clickhouse
  port: 9000
  user: default
  db: logs
  table: logs
  resources:
    limits:
      cpu: 4
      memory: 20Gi
    requests:
      cpu: 1
      memory: 4Gi
fluentd:
  resources:
    limits:
      cpu: 1
      memory: 2Gi
    requests:
      cpu: 0.5
      memory: 1Gi
loghouse:
  resources:
    limits:
      cpu: 1
      memory: 1Gi
    requests:
      cpu: 1
      memory: 512Mi
tabix:
  resources:
    limits:
      memory: 512Mi
      cpu: 0.5
    requests:
      memory: 256Mi
      cpu: 0.2
